@using Elmah.Models;
@using Elmah.Resx;
@using Framework.Models;
@model PagedResponse<ElmahErrorModel.DefaultView[]>
@inject IUIStrings localizor;
<div class="table-responsive p-0">
    <form>
        <table class="table table-hover table-bordered table-striped">
            <thead class="table-dark">
                <tr class="pt-0 pb-0">
                    <th class="p-0">
                        @*<div class="btn-group">
                            <button type="button" class="btn btn-default btn-nt-bulk-select-status" data-nt-bulk-select-status="None">
                                <!--None/Some/All-->
                                <i class="fa-regular fa-square"></i>
                                <i class="fa-regular fa-square-minus d-none"></i>
                                <i class="fa-regular fa-square-check d-none"></i>
                            </button>
                            <button type="button" class="btn btn-default dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown" aria-expanded="false">
                                <span class="visually-hidden">Toggle Dropdown</span>
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item nt-quick-bulk-select" href="#" data-nt-filtername="Application" data-nt-filtervalue="Test Application 1" data-nt-checkbox-checked="true">Test Application 1</a></li>
                                <li><a class="dropdown-item" href="#">Another action</a></li>
                                <li><a class="dropdown-item" href="#">Something else here</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="#">Separated link</a></li>
                            </ul>
                        </div>*@
                    </th>
                    <th class="p-0"></th>
                    <th class="pt-0 pb-0">@localizor.Get("ErrorId")</th>
                    <th class="pt-0 pb-0 nt-quick-bulk-select" data-nt-target="Application">@localizor.Get("Application")</th>
                    <th class="pt-0 pb-0">@localizor.Get("Host")</th>
                    <th class="pt-0 pb-0">@localizor.Get("Type")</th>
                    <th class="pt-0 pb-0">@localizor.Get("Source")</th>
                    <th class="pt-0 pb-0">@localizor.Get("Message")</th>
                    <th class="pt-0 pb-0">@localizor.Get("User")</th>
                    <th class="pt-0 pb-0">@localizor.Get("StatusCode")</th>
                    <th class="pt-0 pb-0">@localizor.Get("TimeUtc")</th>
                    <th class="pt-0 pb-0">@localizor.Get("Sequence")</th>
                    <th class="pt-0 pb-0">@localizor.Get("AllXml")</th>
                    <th class="pt-0 pb-0 "></th>
                </tr>
            </thead>
            <tbody>
                @if (Model != null && Model.Status == System.Net.HttpStatusCode.OK && Model.ResponseBody != null)
                {
                    for (var i = 0; i < Model.ResponseBody.Length; i++)
                    {
                        @await Html.PartialAsync("~/Views/ElmahError/_ListItemTr.cshtml",new Elmah.MvcWebApp.Models.ItemViewModel<Elmah.Models.ElmahErrorModel.DefaultView>
                            {
                                Template = Framework.Models.ViewItemTemplateNames.Details.ToString(),
                                Model = Model.ResponseBody[i],
                                Status = System.Net.HttpStatusCode.OK,
                                IndexInArray = i,
                                HtmlNamePrefix = "Model.ResponseBody",
                                HtmlNameUseArrayIndex = true,
                            })
                    }
                }
                else if (Model != null)
                {
                    <tr>
                        <td colspan="50">
                            <div class="text-danger">@Model.StatusMessage</div>
                        </td>
                    </tr>
                }
            </tbody>
            <!--only for inline editing-->
            <tfoot>
                <tr class="pt-0 pb-0 nt-listitem nt-new" data-nt-route-id="">
                    <td class="nt-createnew-button-container" colspan="100">
                        <button type="button" class="btn btn-primary btn-nt-inline-editing w-100" title="@localizor.Get("Create_New")"
                                data-nt-action="@HttpMethods.Post"
                                data-nt-route-id="@(System.Guid.Empty)"
                                data-nt-container="@Framework.Models.CrudViewContainers.Inline.ToString()"
                                data-nt-template="@Framework.Models.ViewItemTemplateNames.Create.ToString()">
                            <i class="fa fa-plus"></i><span class="submit-text hidden-xs hidden-sm visible-md-inline visible-lg-inline ms-1">@localizor.Get("Create_New")</span>
                        </button>
                    </td>
                </tr>
            </tfoot>
        </table>
    </form>
    @if (Model != null && Model.Pagination != null)
    {
        @await Html.PartialAsync("~/Views/Shared/_Pagination.cshtml", Model.Pagination)
    }
</div>
