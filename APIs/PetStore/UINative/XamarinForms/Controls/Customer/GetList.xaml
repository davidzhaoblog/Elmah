<?xml version="1.0" encoding="utf-8" ?>
<ContentView
        xmlns="http://xamarin.com/schemas/2014/forms"
        xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
        xmlns:d="http://xamarin.com/schemas/2014/forms/design"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:Elmah.PetStore.ViewModels;assembly=Elmah.PetStore.ViewModels"
        xmlns:i18n="clr-namespace:Framework.Xamariner;assembly=Framework.Xamariner"
        xmlns:fx="clr-namespace:Framework.Xamariner;assembly=Framework.Xamariner"
        xmlns:fxam="clr-namespace:Framework.Xaml;assembly=Framework.Xaml"
        xmlns:fxc="clr-namespace:Framework.Xamariner.Controls;assembly=Framework.Xamariner"
        xmlns:fe="clr-namespace:Framework;assembly=Framework"
        xmlns:fxca="clr-namespace:Framework.Xamariner.Controls.ActionForm;assembly=Framework.Xamariner"
        xmlns:tctrl="clr-namespace:Elmah.PetStore.XamarinForms.Controls.Customer"
        mc:Ignorable="d"
        x:Name="self"
        x:Class="Elmah.PetStore.XamarinForms.Controls.Customer.GetList"
        Visual="Material">
    <ContentView.Resources>
        <!--
        Id,Username,Address
        -->
        <DataTemplate x:Key="ItemTemplate">
            <fxc:GenericListItemWithFontIcon
                    Mode="{Binding Path=CustomerListVM.ListItemViewMode, Source={StaticResource PetStoreLocator}}"
                    Style="{DynamicResource CollectionViewItemBase}"
                    MasterFontIcon="{x:Static fxam:FontAwesomeIcons.Book}" MasterFontIconFamily="{StaticResource FontAwesomeSolid}"
                    NavigateCommmand="{Binding Path=CustomerListVM.NavigationContainer.ShowPopupCommand_Details, Source={StaticResource PetStoreLocator}}">
                <fxc:GenericListItemWithFontIcon.MasterContent>
                    <StackLayout VerticalOptions="Center" HorizontalOptions="FillAndExpand">
                        <Label AutomationId="NameLabel" Text="{Binding Path=?, Mode=OneWay}" Style="{StaticResource RegularLabelStyle}" VerticalOptions="Start" VerticalTextAlignment="Start" Padding="0" Margin="0"/>
                        <Label AutomationId="CodeLabel" LineBreakMode ="TailTruncation">
                            <Label.FormattedText>
                                <FormattedString>
                                    <Span Text="{Binding Path=?, Mode=OneWay}" />
                                    <!--<Span Text=", " />
                                        <Span Text="{Binding Path=?, Mode=OneWay}" />-->
                                </FormattedString>
                            </Label.FormattedText>
                        </Label>
                    </StackLayout>
                </fxc:GenericListItemWithFontIcon.MasterContent>
            </fxc:GenericListItemWithFontIcon>
        </DataTemplate>
    </ContentView.Resources>
    <ContentView.Content>
        <fxc:GenericCollectionView ItemTemplate="{StaticResource ItemTemplate}">
            <fxc:GenericCollectionView.ItemContent>
                <Frame Style="{StaticResource PopupItemCtrlBorder}" IsVisible="{Binding PopupVM.IsItemControlPopupVisible, Source={StaticResource Locator}}">
                    <Grid>
                        <!-- 1.1. Create -->
                        <Grid IsVisible="{Binding PopupVM.ItemControlKey, Source={StaticResource Locator}, Converter={StaticResource StringEqualsConverter}, ConverterParameter=Create}">
                            <tctrl:Get BindingContext="{Binding Path=CustomerListVM, Source={StaticResource PetStoreLocator}}" />
                            <fxca:FooterActionSheet Style="{StaticResource FooterActionSheet}" BindingContext="{Binding NavigationVM.Customer.DetailsFormActionSheetWhenEdit, Source={StaticResource PetStoreLocator}}"/>
                            <fxca:CloseButtonCloseItemControlPopup Style="{StaticResource CloseButtonCloseItemControlPopup}" />
                        </Grid>
                        <!-- 1.2. Delete -->
                        <!--
                        <Grid IsVisible="{Binding PopupVM.ItemControlKey, Source={StaticResource Locator}, Converter={StaticResource StringEqualsConverter}, ConverterParameter=Delete}">
                            <tctrl:Get BindingContext="{Binding Path=CustomerListVM, Source={StaticResource PetStoreLocator}}" />
                            <fxca:FooterActionSheet Style="{StaticResource FooterActionSheet}" BindingContext="{Binding NavigationVM.Customer.DetailsFormActionSheetWhenReadOnly, Source={StaticResource PetStoreLocator}}"/>
                            <fxca:CloseButtonCloseItemControlPopup Style="{StaticResource CloseButtonCloseItemControlPopup}" />
                        </Grid>
                        -->
                        <!-- 1.3. Edit -->
                        <Grid IsVisible="{Binding PopupVM.ItemControlKey, Source={StaticResource Locator}, Converter={StaticResource StringEqualsConverter}, ConverterParameter=Edit}">
                            <tctrl:Get BindingContext="{Binding Path=CustomerListVM, Source={StaticResource PetStoreLocator}}" />
                            <fxca:FooterActionSheet Style="{StaticResource FooterActionSheet}" BindingContext="{Binding NavigationVM.Customer.DetailsFormActionSheetWhenEdit, Source={StaticResource PetStoreLocator}}"/>
                            <fxca:CloseButtonCloseItemControlPopup Style="{StaticResource CloseButtonCloseItemControlPopup}" />
                        </Grid>
                        <!-- 1.4. Details -->
                        <Grid IsVisible="{Binding PopupVM.ItemControlKey, Source={StaticResource Locator}, Converter={StaticResource StringEqualsConverter}, ConverterParameter=Details}">
                            <tctrl:Get BindingContext="{Binding Path=CustomerListVM, Source={StaticResource PetStoreLocator}}" />
                            <fxca:FooterActionSheet Style="{StaticResource FooterActionSheet}" BindingContext="{Binding NavigationVM.Customer.DetailsFormActionSheetWhenReadOnly, Source={StaticResource PetStoreLocator}}"/>
                            <fxca:CloseButtonCloseItemControlPopup Style="{StaticResource CloseButtonCloseItemControlPopup}" />
                        </Grid>
                        <!-- 1.5. Copy -->
                        <!--
                        <Grid IsVisible="{Binding PopupVM.ItemControlKey, Source={StaticResource Locator}, Converter={StaticResource StringEqualsConverter}, ConverterParameter=Copy}">
                            <tctrl:Get BindingContext="{Binding Path=CustomerListVM, Source={StaticResource PetStoreLocator}}" />
                            <fxca:CloseButtonCloseItemControlPopup Style="{StaticResource CloseButtonCloseItemControlPopup}" />
                        </Grid>
                        -->
                    </Grid>
                </Frame>
            </fxc:GenericCollectionView.ItemContent>
        </fxc:GenericCollectionView>
    </ContentView.Content>
</ContentView>
